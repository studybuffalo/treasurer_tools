{% extends 'main/base.html' %}

{% block styles %}
  <style>
    /* Override button styles */
    .save, .edit, .delete {
      font-size: 1.5rem;
      min-width: 7rem;
    }

    .header {
      display: none;
      font-weight: 700;
    }

    .grid-investment em {
      font-size: 1.25rem;
    }

    .date {
      font-weight: 700;
    }

    .name {
      font-weight: 700;
    }

    .buttons {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: flex-start;
    }

    .grid-investment.title {
      background-color: rgb(245, 245, 245);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      padding: 0.5rem;
    }

      .grid-investment.title h2 {
        margin: 0;
        padding: 0.5rem 0;
      }

    .grid-investment.content:nth-child(even) {
      background-color: rgba(40, 120, 200, 0.1);
    }


    @media screen and (min-width: 768px) {
      .grid-investment {
        display: grid;
        grid-gap: 1rem;
        grid-template-columns: 3fr 2fr 2fr 2fr 2fr 2fr 3fr;
        grid-template-areas: "name date-invested amount-invested date-matured amount-matured rate buttons";
      }

      .grid-investment em {
        display: none;
      }

      .header {
        display: grid;
      }

      .name {
        grid-area: name;
      }

      .date-invested {
        grid-area: date-invested;
      }

      .amount-invested {
        grid-area: amount-invested;
        justify-self: end;
      }

      .date-matured {
        grid-area: date-matured;
      }

      .amount-matured {
        grid-area: amount-matured;
        justify-self: end;
      }

      .rate {
        grid-area: rate;
        justify-self: end;
      }

      .buttons {
        grid-area: buttons;
        justify-content: flex-end;
      }
    }
  </style>
{% endblock %}

{% block content %}
    <h1>Investments</h1>

    {% include 'main/messages.html' %}

    <div>
      <a href="{% url 'investments:investment_add'%}" class="save">
        Add new investment
      </a>
    </div>

    <div id="investments">
      {% for investment in investments %}
        <div class="grid-investment title">
          <div class="title"><h2>{{ investment.name }}</h2></div>
          <div class="details">{{ investment.rate }}</div>
          <div class="buttons">
            <a href="{% url 'investments:investment_edit' investment.id %}" class="edit">Edit</a>
            <a href="{% url 'investments:investment_delete' investment.id %}" class="delete">Delete</a>
            <a href="{% url 'investments:detail_add' investment.id %}" class="save">Add detail</a>
          </div>
        </div>

        <div class="grid-investment header">
          <div class="date-invested">Date</div>
          <div class="amount-invested">Status</div>
          <div class="amount-matured">Amount Matured</div>
          <div class="rate">Rate</div>
        </div>

        {% for detail in investment.investmentdetails.all %}
          <div class="grid-investment content">
            <div class="date"><em>Date:</em> {{ detail.date_investment|date:"Y-m-d" }}</div>
            <div class="status"><em>Type:</em> {{ detail.get_detail_status_display }}</div>
            <div class="amount"><em>Amount:</em> ${{ detail.amount }}</div>
            <div class="buttons">
              <a href="{% url 'investments:detail_edit' detail.id %}" class="edit">Edit</a>
              <a href="{% url 'investments:detail_delete' detail.id %}" class="delete">Delete</a>
            </div>
          </div>
        {% endfor %}
      {% endfor %}
    </div>
{% endblock %}
